# 1. MODULE IDENTIFICATION

**Module Name:** Application Capture
**Module Number:** 03.1
**Module Type:** Master
**Target File:** HR/03.Talent & Onboarding/03.1 Application Capture.md
**Created Date:** December 29, 2025
**Version:** 1.0
**Author:** HR System Architect

--- END OF SECTION 1 ---

## 2. PURPOSE

### 2.1 Business Purpose
The Application Capture module provides a comprehensive system for capturing, managing, and processing job applications from various sources. It serves as the central hub for all recruitment activities, enabling HR professionals to efficiently collect candidate information, track application status, and manage the entire application lifecycle from initial submission to hiring decision.

### 2.2 Business Scope
**In Scope:**
- Multi-channel application capture (career site, job boards, social media, referrals)
- Comprehensive candidate profile management
- Application form customization and dynamic fields
- Document upload and attachment management
- Application screening and initial evaluation
- Duplicate detection and candidate matching
- Application status tracking and workflow management
- Communication templates and automated responses
- EEO and diversity tracking compliance
- Candidate self-service portal
- Integration with ATS and HRIS systems

**Out of Scope:**
- Detailed interview scheduling (handled in Interview Scheduling module)
- Background check processing (handled in Screening module)
- Offer management (handled in Offer Management module)
- Onboarding workflows (handled in New Hire Setup module)

### 2.3 Key Stakeholders
- **HR Recruiters:** Application management and candidate communication
- **Hiring Managers:** Application review and candidate evaluation
- **Candidates:** Application submission and status tracking
- **Compliance Officers:** EEO reporting and audit compliance
- **IT Department:** System integration and technical support
- **Marketing Team:** Job posting and career site management

--- END OF SECTION 2 ---

## 3. CORE MODELS (DJANGO)

### 3.1 Primary Model: JobApplication

```python
class JobApplication(models.Model):
    """
    Core job application model for capturing candidate information
    """
    
    # Primary Key
    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
    
    # Foreign Keys
    company_id = models.UUIDField()
    job_posting_id = models.UUIDField()
    candidate_id = models.UUIDField()
    created_by_user_id = models.UUIDField()
    updated_by_user_id = models.UUIDField()
    
    # Application Details
    application_number = models.CharField(max_length=50)
    application_date = models.DateTimeField(auto_now_add=True)
    application_source = models.CharField(max_length=100, choices=[
        ('career_site', 'Career Site'),
        ('job_board', 'Job Board'),
        ('social_media', 'Social Media'),
        ('referral', 'Employee Referral'),
        ('agency', 'Recruitment Agency'),
        ('campus', 'Campus Recruitment'),
        ('walk_in', 'Walk In'),
        ('internal', 'Internal Transfer'),
        ('other', 'Other'),
    ])
    source_details = models.CharField(max_length=200, blank=True)
    referral_employee_id = models.UUIDField(null=True, blank=True)
    
    # Application Status
    status = models.CharField(max_length=50, choices=[
        ('received', 'Received'),
        ('under_review', 'Under Review'),
        ('screening', 'Screening'),
        ('interview', 'Interview'),
        ('assessment', 'Assessment'),
        ('offer_extended', 'Offer Extended'),
        ('offer_accepted', 'Offer Accepted'),
        ('offer_declined', 'Offer Declined'),
        ('hired', 'Hired'),
        ('rejected', 'Rejected'),
        ('withdrawn', 'Withdrawn'),
        ('on_hold', 'On Hold'),
    ], default='received')
    
    # Priority
    priority = models.CharField(max_length=20, choices=[
        ('low', 'Low'),
        ('medium', 'Medium'),
        ('high', 'High'),
        ('urgent', 'Urgent'),
    ], default='medium')
    
    # Screening Results
    screening_score = models.IntegerField(null=True, blank=True)
    screening_notes = models.TextField(blank=True)
    auto_screened = models.BooleanField(default=False)
    
    # Communication Preferences
    preferred_contact_method = models.CharField(max_length=50, choices=[
        ('email', 'Email'),
        ('phone', 'Phone'),
        ('sms', 'SMS'),
        ('portal', 'Candidate Portal'),
    ], default='email')
    
    # EEO Information
    gender = models.CharField(max_length=20, choices=[
        ('male', 'Male'),
        ('female', 'Female'),
        ('other', 'Other'),
        ('prefer_not_to_say', 'Prefer not to say'),
    ], blank=True)
    ethnicity = models.CharField(max_length=100, blank=True)
    veteran_status = models.CharField(max_length=50, choices=[
        ('no', 'No'),
        ('yes', 'Yes'),
        ('prefer_not_to_say', 'Prefer not to say'),
    ], blank=True)
    disability = models.CharField(max_length=50, choices=[
        ('no', 'No'),
        ('yes', 'Yes'),
        ('prefer_not_to_say', 'Prefer not to say'),
    ], blank=True)
    
    # Audit Fields
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
    
    class Meta:
        db_table = 'hr_job_applications'
        verbose_name = 'Job Application'
        verbose_name_plural = 'Job Applications'
        indexes = [
            models.Index(fields=['company_id', 'job_posting_id'], name='idx_app_job'),
            models.Index(fields=['company_id', 'candidate_id'], name='idx_app_candidate'),
            models.Index(fields=['company_id', 'status'], name='idx_app_status'),
            models.Index(fields=['company_id', 'application_date'], name='idx_app_date'),
        ]
        constraints = [
            models.UniqueConstraint(fields=['company_id', 'application_number'], name='uk_app_number'),
        ]
```

### 3.2 Supporting Model: ApplicationAnswer

```python
class ApplicationAnswer(models.Model):
    """
    Answers to application form questions
    """
    
    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
    company_id = models.UUIDField()
    application_id = models.UUIDField()
    question_id = models.UUIDField()
    
    # Answer Details
    question_text = models.TextField()
    answer_text = models.TextField(blank=True)
    answer_type = models.CharField(max_length=50, choices=[
        ('text', 'Text'),
        ('textarea', 'Textarea'),
        ('select', 'Select'),
        ('multiselect', 'Multi Select'),
        ('radio', 'Radio'),
        ('checkbox', 'Checkbox'),
        ('date', 'Date'),
        ('number', 'Number'),
        ('email', 'Email'),
        ('phone', 'Phone'),
        ('url', 'URL'),
        ('file', 'File'),
    ])
    answer_options = models.JSONField(default=dict, blank=True)
    
    # Validation
    is_required = models.BooleanField(default=False)
    is_valid = models.BooleanField(default=True)
    validation_message = models.TextField(blank=True)
    
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
    
    class Meta:
        db_table = 'hr_application_answers'
        verbose_name = 'Application Answer'
        verbose_name_plural = 'Application Answers'
        indexes = [
            models.Index(fields=['company_id', 'application_id'], name='idx_answer_app'),
            models.Index(fields=['company_id', 'question_id'], name='idx_answer_question'),
        ]
```

### 3.3 Supporting Model: ApplicationDocument

```python
class ApplicationDocument(models.Model):
    """
    Documents attached to job applications
    """
    
    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
    company_id = models.UUIDField()
    application_id = models.UUIDField()
    
    # Document Details
    document_type = models.CharField(max_length=100, choices=[
        ('resume', 'Resume/CV'),
        ('cover_letter', 'Cover Letter'),
        ('transcript', 'Academic Transcript'),
        ('certificate', 'Certificate'),
        ('portfolio', 'Portfolio'),
        ('id_proof', 'ID Proof'),
        ('work_samples', 'Work Samples'),
        ('reference', 'Reference Letter'),
        ('other', 'Other'),
    ])
    document_name = models.CharField(max_length=200)
    description = models.TextField(blank=True)
    file_url = models.URLField()
    file_size = models.BigInteger()
    file_type = models.CharField(max_length=100)
    
    # Processing Status
    processing_status = models.CharField(max_length=50, choices=[
        ('uploaded', 'Uploaded'),
        ('processing', 'Processing'),
        ('processed', 'Processed'),
        ('error', 'Error'),
        ('virus_scan', 'Virus Scan'),
    ], default='uploaded')
    
    # Metadata
    upload_date = models.DateTimeField(auto_now_add=True)
    processed_date = models.DateTimeField(null=True, blank=True)
    virus_scan_result = models.CharField(max_length=50, blank=True)
    
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
    
    class Meta:
        db_table = 'hr_application_documents'
        verbose_name = 'Application Document'
        verbose_name_plural = 'Application Documents'
        indexes = [
            models.Index(fields=['company_id', 'application_id'], name='idx_doc_app'),
            models.Index(fields=['company_id', 'document_type'], name='idx_doc_type'),
        ]
```

--- END OF SECTION 3 ---

## 4. REFERENCE MODELS (DJANGO)

### 4.1 JobPosting

```python
class JobPosting(models.Model):
    """
    Job posting that applications are submitted for
    """
    
    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
    company_id = models.UUIDField()
    title = models.CharField(max_length=200)
    description = models.TextField()
    requirements = models.TextField(blank=True)
    is_active = models.BooleanField(default=True)
    
    class Meta:
        db_table = 'hr_job_postings'
        verbose_name = 'Job Posting'
        verbose_name_plural = 'Job Postings'
```

### 4.2 Candidate

```python
class Candidate(models.Model):
    """
    Candidate information
    """
    
    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
    company_id = models.UUIDField()
    first_name = models.CharField(max_length=100)
    last_name = models.CharField(max_length=100)
    email = models.EmailField()
    phone = models.CharField(max_length=50, blank=True)
    
    class Meta:
        db_table = 'hr_candidates'
        verbose_name = 'Candidate'
        verbose_name_plural = 'Candidates'
```

### 4.3 ApplicationQuestion

```python
class ApplicationQuestion(models.Model):
    """
    Dynamic questions for application forms
    """
    
    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
    company_id = models.UUIDField()
    question_text = models.TextField()
    question_type = models.CharField(max_length=50)
    is_required = models.BooleanField(default=False)
    options = models.JSONField(default=dict, blank=True)
    
    class Meta:
        db_table = 'hr_application_questions'
        verbose_name = 'Application Question'
        verbose_name_plural = 'Application Questions'
```

--- END OF SECTION 4 ---

## 5. FOREIGN KEY RELATIONSHIPS

### 5.1 Primary Relationships
- **JobApplication** → **JobPosting**: Application for specific job
- **JobApplication** → **Candidate**: Candidate who submitted application
- **ApplicationAnswer** → **JobApplication**: Answer belongs to application
- **ApplicationAnswer** → **ApplicationQuestion**: Answer for specific question
- **ApplicationDocument** → **JobApplication**: Document attached to application

### 5.2 Many-to-Many Relationships
- **JobApplication** ↔ **ApplicationQuestion**: Through ApplicationAnswer
- **JobApplication** ↔ **ApplicationDocument**: One-to-many relationship

--- END OF SECTION 5 ---

## 6. BUSINESS RULES & VALIDATIONS

### 6.1 Data Integrity Rules
- Application numbers must be unique within company
- Required questions must be answered before submission
- Document file size limits enforced (typically 10MB)
- Email addresses must be unique for candidates
- Phone numbers must follow format validation

### 6.2 Validation Logic
```python
def clean_email(self):
    """
    Validate email format and uniqueness
    """
    if self.email and not validate_email(self.email):
        raise ValidationError("Please enter a valid email address")
    
    # Check for duplicate candidates
    if Candidate.objects.filter(email__iexact=self.email).exists():
        raise ValidationError("A candidate with this email already exists")

def clean_phone(self):
    """
    Validate phone number format
    """
    if self.phone and not validate_phone(self.phone):
        raise ValidationError("Please enter a valid phone number")

def clean_application_date(self):
    """
    Ensure application date is not in future
    """
    if self.application_date and self.application_date > timezone.now():
        raise ValidationError("Application date cannot be in the future")
```

### 6.3 Business Constraints
- Maximum file upload size: 10MB per document
- Maximum number of documents per application: 10
- Application retention period: 2 years for rejected applications
- Auto-screening score range: 0-100

--- END OF SECTION 6 ---

## 7. UI/UX SPECIFICATIONS

### 7.1 User Interface Requirements
- **Layout:** Multi-step application form with progress indicator
- **Navigation:** Clear section navigation with save and continue functionality
- **Responsiveness:** Mobile-optimized application forms
- **Views:** Candidate view, Recruiter view, Manager view

### 7.2 User Experience Design
- **User Flow:** Find job → Start application → Complete form → Submit → Track status
- **Error Handling:** Real-time validation with helpful error messages
- **Loading States:** Progress indicators for file uploads
- **Auto-save:** Automatic draft saving to prevent data loss

### 7.3 Accessibility Standards
- **WCAG Compliance:** WCAG 2.1 AA
- **Keyboard Navigation:** Full keyboard accessibility for all form fields
- **Screen Reader Support:** Proper ARIA labels and semantic HTML

### 7.4 Visual Design System
- **Color Scheme:** Professional colors with status indicators
- **Typography:** Clean, readable fonts for form fields
- **Iconography:** Intuitive icons for actions and sections

--- END OF SECTION 7 ---

## 8. INTEGRATION POINTS

### 8.1 External Systems
- **Job Boards:** Indeed, LinkedIn, Monster API integrations
- **Social Media:** Facebook, Twitter, Instagram job posting APIs
- **Applicant Tracking Systems:** Workday, Taleo, Greenhouse integrations
- **Email Marketing:** Mailchimp, Constant Contact for communications
- **Background Check Services:** Checkr, HireRight for verification

### 8.2 Internal APIs
- **Candidate Management API:** Candidate profile synchronization
- **Job Posting API:** Job information and requirements
- **Screening API:** Integration with screening module
- **Interview Scheduling API:** Calendar integration for interviews
- **Communication API:** Email and SMS notification systems

--- END OF SECTION 8 ---

## 9. API SPECIFICATIONS

### 9.1 REST Endpoints

#### **GET /api/applications/**
- **Purpose:** Retrieve job applications list
- **Authentication:** JWT token required
- **Parameters:** 
  - `job_posting_id` (UUID): Filter by job posting
  - `status` (string): Filter by application status
  - `candidate_id` (UUID): Filter by candidate
  - `date_from` (date): Filter by application date
- **Response:** Paginated list of applications

#### **POST /api/applications/**
- **Purpose:** Create new job application
- **Authentication:** JWT token required
- **Request Body:** Application data with answers and documents
- **Response:** Created application object

#### **GET /api/applications/{application_id}/**
- **Purpose:** Retrieve specific application details
- **Authentication:** JWT token required
- **Parameters:** `application_id` (UUID)
- **Response:** Complete application object with answers and documents

#### **PUT /api/applications/{application_id}/**
- **Purpose:** Update application status or information
- **Authentication:** JWT token with appropriate permissions
- **Request Body:** Updated application data
- **Response:** Updated application object

#### **POST /api/applications/{application_id}/documents/**
- **Purpose:** Upload document to application
- **Authentication:** JWT token required
- **Request Body:** Document metadata and file
- **Response:** Created document object

#### **GET /api/applications/{application_id}/screening/**
- **Purpose:** Trigger automated screening
- **Authentication:** JWT token required
- **Response:** Screening results and score

### 9.2 Data Formats
- **Request Format:** JSON with multipart/form-data for file uploads
- **Response Format:** JSON
- **Error Format:** Standardized error response with validation details

--- END OF SECTION 9 ---

## 10. SECURITY REQUIREMENTS

### 10.1 Authentication
- **Method:** JWT-based authentication with role-based access
- **Authorization:** Application access based on user role and relationship
- **Session Management:** Secure session handling with timeout

### 10.2 Data Protection
- **Encryption:** Encrypted storage for personal information
- **Privacy Controls:** GDPR compliance with data subject rights
- **Data Masking:** Sensitive information masking for unauthorized viewers

### 10.3 Access Control
- **Permissions:**
  - **Own Application:** Candidates can view their own applications
  - **Recruiter:** Full access to applications in their job postings
  - **Hiring Manager:** Access to applications for their positions
  - **HR Admin:** Full access to all applications
- **Audit Trail:** Complete audit logging for all application changes

--- END OF SECTION 10 ---

## 11. PERFORMANCE CONSIDERATIONS

### 11.1 Database Optimization
- **Indexing Strategy:** Optimized indexes on frequently queried fields
- **Query Optimization:** Efficient application retrieval with proper joins
- **Connection Pooling:** Database connection management for high traffic

### 11.2 Caching Strategy
- **Cache Layers:** Redis for frequently accessed application data
- **Cache Invalidation:** Smart cache invalidation on updates
- **Performance Metrics:** Sub-500ms response time for application loading

--- END OF SECTION 11 ---

## 12. TESTING REQUIREMENTS

### 12.1 Unit Tests
- **Coverage Target:** 85%
- **Test Framework:** pytest with Django test extensions
- **Test Data:** Factory Boy for comprehensive test data generation

### 12.2 Integration Tests
- **API Testing:** Complete API endpoint testing
- **File Upload Testing:** Document upload and processing testing
- **Integration Testing:** Third-party system integration validation

### 12.3 User Acceptance Tests
- **UAT Scenarios:** Complete application submission workflows
- **Cross-browser Testing:** Compatibility across major browsers
- **Mobile Testing:** Responsive design validation

--- END OF SECTION 12 ---

## 13. DEPLOYMENT SPECIFICATIONS

### 13.1 Environment Requirements
- **Development:** Local development with file storage
- **Staging:** Cloud storage integration testing
- **Production:** Scalable cloud infrastructure with CDN

### 13.2 Configuration Management
- **Settings:** Environment-specific configuration
- **File Storage:** Configurable storage backends (local, S3, Azure Blob)
- **Security Settings:** Production security hardening

--- END OF SECTION 13 ---

## 14. MAINTENANCE & SUPPORT

### 14.1 Regular Maintenance
- **Data Cleanup:** Regular cleanup of old applications
- **Performance Monitoring:** Application processing performance tracking
- **Security Updates:** Regular security patching

### 14.2 Support Procedures
- **User Support:** Help desk integration for application issues
- **Documentation:** Comprehensive user guides and API documentation
- **Training:** Regular training sessions for recruiters and hiring managers

--- END OF SECTION 14 ---

## 15. VERSION CONTROL

### 15.1 Version History
- **v1.0.0:** Initial release with basic application capture
- **v1.1.0**: Enhanced screening and automation features
- **v1.2.0**: Advanced integration capabilities

### 15.2 Change Management
- **Release Process:** Structured release with rollback capability
- **Migration Scripts:** Database migration handling
- **Feature Flags:** Gradual feature rollout capability

--- END OF SECTION 15 ---

## 16. COMPLIANCE & AUDIT

### 16.1 Regulatory Compliance
- **EEO Compliance:** Equal Employment Opportunity compliance tracking
- **GDPR:** Data privacy and candidate rights compliance
- **Data Protection:** Secure handling of candidate information

### 16.2 Audit Requirements
- **Audit Trail:** Complete change history logging
- **EEO Reporting:** Automated EEO reporting generation
- **Access Logging:** Comprehensive access audit logging

--- END OF SECTION 16 ---

**END OF BBP TEMPLATE**
