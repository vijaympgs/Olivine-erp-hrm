# 1.1 Employee Management – Business Blueprint (BBP)

## 1.1.1 Business Purpose
The Employee Management module serves as the authoritative enterprise master for managing all employee-related data, organizational structure, lifecycle events, and employee-facing services. It acts as the single source of truth for workforce information and a parent dependency for Payroll, Attendance, IAM, POS authorization, and approval workflows.

## 1.1.2 Business Scope
### In Scope
- Employee master data management
- Organizational hierarchy and reporting
- Employee self-service (ESS)
- Employee document management
- Employee lifecycle workflows

### Out of Scope
- Payroll computation
- Time & attendance calculation
- Recruitment / ATS
- Performance & appraisal management

## 1.1.3 Canonical Domain Mapping
- Domain: HRM
- Aggregate Root: Employee
- Ownership: Company (enterprise-level)
- Nature: Shared master across ERP modules

## 1.1.4 Core Business Entities & Detailed Schema

### Employee (Aggregate Root)
Fields:
- id (UUID, PK)
- employee_code (string, unique, immutable)
- company_id (UUID, FK → Company)
- first_name
- last_name
- display_name
- email (unique)
- mobile_number
- gender (enum)
- date_of_birth
- employment_type (enum: permanent, contract, part-time)
- employment_status (enum: draft, onboarding, active, on_leave, resigned, terminated)
- date_of_joining
- confirmation_date (nullable)
- exit_date (nullable)
- department_id (UUID, FK)
- position_id (UUID, FK)
- manager_id (UUID, FK → Employee, nullable)
- primary_location_id (UUID, FK → Location)
- created_at, updated_at
- created_by, updated_by

Business Validations:
- One employee belongs to exactly one company
- An employee can have only one direct manager
- Circular reporting is prohibited
- Terminated employee records are immutable

### Department
Fields:
- id (UUID, PK)
- company_id (UUID)
- code (string, unique per company)
- name (string)
- is_active (boolean)

### Position
Fields:
- id (UUID, PK)
- company_id (UUID)
- code (string)
- title (string)
- level (integer)
- is_managerial (boolean)

### EmployeeLocation
Fields:
- id (UUID, PK)
- employee_id (UUID, FK)
- location_id (UUID, FK)
- is_primary (boolean)
- effective_from (date)
- effective_to (date, nullable)

## 1.1.5 Organizational Hierarchy
Model:
- Adjacency list (manager_id self-reference)

Rules:
- One direct manager per employee
- Effective-dated changes
- Historical hierarchy preserved

## 1.1.6 Employee Directory
UI Specification:
- Search by name, code, department, location
- Filters: active/inactive, role, location
- Pagination and export

Business Rules:
- Read-only access for non-HR roles
- Location-scoped visibility for store users

## 1.1.7 Employee Self-Service (ESS)
UI Specification:
- Profile view screen
- Change request form
- Approval status tracker

Model: EmployeeProfileChangeRequest
- id (UUID, PK)
- employee_id (UUID)
- field_name
- old_value (JSON)
- new_value (JSON)
- status (pending, approved, rejected)
- requested_at
- approved_by
- approved_at

Validations:
- Sensitive fields require HR approval
- All changes are auditable

## 1.1.8 Document Management
UI Specification:
- Upload/download documents
- Version history
- Expiry alerts

Model: EmployeeDocument
- id (UUID, PK)
- employee_id (UUID)
- document_type (offer, contract, id, appraisal, policy)
- file_path
- version
- is_final
- expiry_date
- uploaded_at
- uploaded_by

Rules:
- Final documents cannot be deleted
- Versioning is mandatory

## 1.1.9 Employee Lifecycle Management
Lifecycle States:
Draft → Onboarding → Active → On Leave → Resigned → Offboarded

Model: EmployeeLifecycleEvent
- id (UUID, PK)
- employee_id
- event_type
- from_status
- to_status
- effective_date
- remarks
- triggered_by
- triggered_at

Rules:
- Controlled state transitions only
- Exit requires clearance from Payroll, IT, Admin

## 1.1.10 Roles & Access Control
- HR Admin: Full CRUD
- Manager: View/manage direct reports
- Employee: Self-service only
- System Admin: Configuration

## 1.1.11 Integrations & Dependencies
- Payroll: Employee master, status
- Attendance: Identity mapping
- POS: Role & location authorization
- IAM: User provisioning
- Finance: Cost center linkage

## 1.1.12 Audit, Compliance & Controls
- Complete audit trail for all changes
- Role-based access enforcement
- GDPR-ready personal data handling
- Document retention policies

## 1.1.13 KPIs & Monitoring
- Employee onboarding cycle time
- Active vs inactive employee ratio
- Document compliance completion rate
- ESS request resolution time

---

## 1.1.X Reference Role & Governance Contract

### Reference Role
This BBP serves as the **PRIMARY CANONICAL HRM REFERENCE** for all employee-centric domains.

Downstream HRM BBPs MAY:
- Read employee identity, status, hierarchy, and location
- Subscribe to employee lifecycle events
- Reference employment type and organizational mapping

Downstream HRM BBPs MUST NOT:
- Mutate core employee identity fields
- Override lifecycle transitions
- Bypass Employee Management approvals or controls

---

## 1.1.X Employee Lifecycle – State Transition Matrix

| From State | To State | Trigger | Approval |
|-----------|---------|---------|----------|
| Draft | Onboarding | HR creation | HR Admin |
| Onboarding | Active | DOJ reached | HR |
| Active | On Leave | Leave module | Manager |
| Active | Resigned | Employee/HR | HR + Manager |
| Resigned | Offboarded | Clearance completed | System |
| Any | Terminated | Policy breach | HR + Legal |

---

## 1.1.X Field Authority Classification

### Authoritative Fields
- employee_code
- company_id
- employment_status
- manager_id

### Derived / Computed Fields
- display_name
- role_assignments
- cost_center_id

### External-Locked Fields
- payroll_id
- biometric_id

---

## 1.1.X Role Capability Matrix

| Role | View | Create | Update | Approve | Terminate |
|-----|------|--------|--------|---------|-----------|
| HR Admin | ✅ | ✅ | ✅ | ✅ | ✅ |
| Manager | ✅ (Reports) | ❌ | ⚠️ Limited | ✅ | ❌ |
| Employee | ✅ (Self) | ❌ | ⚠️ ESS | ❌ | ❌ |
| System | ⚠️ | ❌ | ❌ | ❌ | ❌ |

---

## 1.1.X Employee Domain Events

- employee.created
- employee.onboarded
- employee.activated
- employee.manager_changed
- employee.location_changed
- employee.resigned
- employee.offboarded

---

## 1.1.X Explicit Domain Exclusions

The following are **explicitly out of scope** and must be modeled in their respective BBPs:
- Leave balances and accruals
- Attendance logs and shifts
- Payroll calculations and payouts
- Performance ratings
- Incentives, bonuses, and rewards

---

## 1.1.X Architectural Notes

- Employee is a **shared enterprise master**
- Changes are **audit-mandatory**
- Downstream modules must integrate via **reference or events**
