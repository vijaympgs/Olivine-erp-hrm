# CRM Contact Directory - Business Blueprint

## **1. MODULE IDENTIFICATION**

**Module Name:** Contact Directory
**Module Number:** 2.2
**Module Type:** Master
**Complexity:** Medium (MST-M)
**Template Type:** Complete (16 sections)
**Target File:** CRM/02.Lead & Contact Management/2.2Contact Directory (Master).md
**Created Date:** December 31, 2025
**Version:** 1.0
**Author:** CRM System

--- END OF SECTION 1 ---

## **2. PURPOSE**

### **2.1 Business Purpose**
The Contact Directory serves as the centralized repository for all contact information within the CRM system, providing comprehensive management of individuals and organizations. It enables efficient contact data storage, retrieval, and relationship management while ensuring data quality, deduplication, and seamless integration with other CRM modules for unified customer relationship management.

### **2.2 Business Scope**

**In Scope:**
- Comprehensive contact information management (personal, professional, communication details)
- Organization and company data with hierarchical relationships
- Contact categorization, segmentation, and tagging systems
- Relationship mapping between contacts and organizations
- Contact data quality management and deduplication
- Contact history and activity tracking integration
- Advanced search, filtering, and directory navigation
- Contact import/export and data synchronization
- Role-based access control and data privacy management
- Mobile-responsive contact access and management

**Out of Scope:**
- Lead capture and scoring workflows (handled by Lead Capture module)
- Opportunity and deal management (handled by Opportunity Pipeline module)
- Campaign and marketing automation (handled by Marketing modules)
- Customer service ticket management (handled by Support modules)
- Advanced analytics and reporting dashboards
- Document management and file attachments
- Social media integration and monitoring

### **2.3 Key Stakeholders**
- **Sales Representatives:** Access and manage customer/prospect contacts, track relationships
- **Sales Managers:** Oversee team contact management, monitor data quality
- **Marketing Teams:** Segment contacts for campaigns, manage target lists
- **Customer Service Representatives:** Access contact information for support interactions
- **Account Managers:** Maintain strategic account contact relationships
- **Data Administrators:** Manage data quality, imports, and system configuration
- **Executives:** Access high-level contact analytics and relationship insights
- **Compliance Officers:** Ensure data privacy and regulatory compliance

--- END OF SECTION 2 ---

## **3. CORE MODELS (DJANGO)**

### **3.1 Primary Model: Contact**

```python
class Contact(models.Model):
    """
    Primary contact model storing individual contact information
    """
    
    # Primary Key
    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
    
    # Foreign Keys
    company_id = models.UUIDField()
    created_by_user_id = models.UUIDField()
    organization_id = models.UUIDField(null=True, blank=True)
    
    # Core Fields
    salutation = models.CharField(max_length=10, choices=SALUTATION_CHOICES)
    first_name = models.CharField(max_length=100)
    middle_name = models.CharField(max_length=100, null=True, blank=True)
    last_name = models.CharField(max_length=100)
    suffix = models.CharField(max_length=20, null=True, blank=True)
    display_name = models.CharField(max_length=200)
    job_title = models.CharField(max_length=200, null=True, blank=True)
    department = models.CharField(max_length=100, null=True, blank=True)
    
    # Contact Information
    primary_email = models.EmailField()
    secondary_email = models.EmailField(null=True, blank=True)
    phone = models.CharField(max_length=20, null=True, blank=True)
    mobile = models.CharField(max_length=20, null=True, blank=True)
    fax = models.CharField(max_length=20, null=True, blank=True)
    
    # Address Information
    address_line_1 = models.CharField(max_length=200, null=True, blank=True)
    address_line_2 = models.CharField(max_length=200, null=True, blank=True)
    city = models.CharField(max_length=100, null=True, blank=True)
    state = models.CharField(max_length=100, null=True, blank=True)
    postal_code = models.CharField(max_length=20, null=True, blank=True)
    country = models.CharField(max_length=100, null=True, blank=True)
    
    # Classification Fields
    contact_type = models.CharField(max_length=20, choices=CONTACT_TYPE_CHOICES)
    contact_source = models.CharField(max_length=50, choices=SOURCE_CHOICES)
    contact_status = models.CharField(max_length=20, choices=STATUS_CHOICES, default='active')
    lead_score = models.IntegerField(default=0)
    
    # Social Media
    linkedin_profile = models.URLField(null=True, blank=True)
    twitter_profile = models.URLField(null=True, blank=True)
    facebook_profile = models.URLField(null=True, blank=True)
    
    # Preferences and Notes
    preferred_communication = models.CharField(max_length=20, choices=COMMUNICATION_CHOICES)
    do_not_call = models.BooleanField(default=False)
    do_not_email = models.BooleanField(default=False)
    notes = models.TextField(null=True, blank=True)
    
    # Audit Fields
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
    last_contacted_at = models.DateTimeField(null=True, blank=True)
    
    class Meta:
        db_table = 'crm_contacts'
        verbose_name = 'Contact'
        verbose_name_plural = 'Contacts'
        indexes = [
            models.Index(fields=['company_id', 'contact_status'], name='idx_company_status'),
            models.Index(fields=['organization_id'], name='idx_organization'),
            models.Index(fields=['primary_email'], name='idx_email'),
            models.Index(fields=['last_name', 'first_name'], name='idx_name'),
            models.Index(fields=['contact_type'], name='idx_contact_type'),
            models.Index(fields=['lead_score'], name='idx_lead_score'),
        ]
        constraints = [
            models.UniqueConstraint(fields=['company_id', 'primary_email'], name='uk_company_email'),
        ]
```

### **3.2 Supporting Model: Organization**

```python
class Organization(models.Model):
    """
    Organization model storing company and business entity information
    """
    
    # Primary Key
    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
    
    # Foreign Keys
    company_id = models.UUIDField()
    created_by_user_id = models.UUIDField()
    parent_organization_id = models.UUIDField(null=True, blank=True)
    
    # Core Fields
    organization_name = models.CharField(max_length=200)
    legal_name = models.CharField(max_length=200, null=True, blank=True)
    display_name = models.CharField(max_length=200)
    
    # Classification
    organization_type = models.CharField(max_length=50, choices=ORG_TYPE_CHOICES)
    industry = models.CharField(max_length=100, choices=INDUSTRY_CHOICES)
    sub_industry = models.CharField(max_length=100, null=True, blank=True)
    employee_size = models.CharField(max_length=50, choices=SIZE_CHOICES)
    revenue_range = models.CharField(max_length=50, choices=REVENUE_CHOICES)
    
    # Contact Information
    primary_phone = models.CharField(max_length=20, null=True, blank=True)
    primary_email = models.EmailField(null=True, blank=True)
    website = models.URLField(null=True, blank=True)
    
    # Address Information
    address_line_1 = models.CharField(max_length=200, null=True, blank=True)
    address_line_2 = models.CharField(max_length=200, null=True, blank=True)
    city = models.CharField(max_length=100, null=True, blank=True)
    state = models.CharField(max_length=100, null=True, blank=True)
    postal_code = models.CharField(max_length=20, null=True, blank=True)
    country = models.CharField(max_length=100, null=True, blank=True)
    
    # Status and Metadata
    organization_status = models.CharField(max_length=20, choices=STATUS_CHOICES, default='active')
    is_customer = models.BooleanField(default=False)
    is_partner = models.BooleanField(default=False)
    is_competitor = models.BooleanField(default=False)
    is_supplier = models.BooleanField(default=False)
    
    # Description and Notes
    description = models.TextField(null=True, blank=True)
    notes = models.TextField(null=True, blank=True)
    
    # Audit Fields
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
    
    class Meta:
        db_table = 'crm_organizations'
        verbose_name = 'Organization'
        verbose_name_plural = 'Organizations'
        indexes = [
            models.Index(fields=['company_id', 'organization_status'], name='idx_org_company_status'),
            models.Index(fields=['parent_organization_id'], name='idx_parent_org'),
            models.Index(fields=['organization_name'], name='idx_org_name'),
            models.Index(fields=['industry'], name='idx_industry'),
            models.Index(fields=['is_customer'], name='idx_customer'),
        ]
        constraints = [
            models.UniqueConstraint(fields=['company_id', 'organization_name'], name='uk_company_org_name'),
        ]
```

### **3.3 Supporting Model: ContactRelationship**

```python
class ContactRelationship(models.Model):
    """
    Model to define relationships between contacts and organizations
    """
    
    # Primary Key
    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
    
    # Foreign Keys
    company_id = models.UUIDField()
    contact_id = models.UUIDField()
    organization_id = models.UUIDField()
    
    # Relationship Fields
    relationship_type = models.CharField(max_length=50, choices=RELATIONSHIP_CHOICES)
    is_primary = models.BooleanField(default=False)
    is_decision_maker = models.BooleanField(default=False)
    is_influencer = models.BooleanField(default=False)
    
    # Role and Department Information
    role = models.CharField(max_length=200, null=True, blank=True)
    department = models.CharField(max_length=100, null=True, blank=True)
    reporting_to_contact_id = models.UUIDField(null=True, blank=True)
    
    # Status and Dates
    relationship_status = models.CharField(max_length=20, choices=STATUS_CHOICES, default='active')
    start_date = models.DateField(null=True, blank=True)
    end_date = models.DateField(null=True, blank=True)
    
    # Audit Fields
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
    created_by_user_id = models.UUIDField()
    
    class Meta:
        db_table = 'crm_contact_relationships'
        verbose_name = 'Contact Relationship'
        verbose_name_plural = 'Contact Relationships'
        indexes = [
            models.Index(fields=['company_id', 'contact_id'], name='idx_company_contact'),
            models.Index(fields=['organization_id', 'relationship_type'], name='idx_org_relationship'),
            models.Index(fields=['is_primary'], name='idx_primary_relationship'),
        ]
        constraints = [
            models.UniqueConstraint(fields=['contact_id', 'organization_id', 'relationship_type'], name='uk_contact_org_relationship'),
        ]
```

--- END OF SECTION 3 ---

## **4. REFERENCE MODELS (DJANGO)**

### **4.1 ContactTag**

```python
class ContactTag(models.Model):
    """
    Reference model for contact categorization and tagging
    """
    
    # Primary Key
    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
    
    # Foreign Keys
    company_id = models.UUIDField()
    
    # Core Fields
    tag_name = models.CharField(max_length=50)
    tag_color = models.CharField(max_length=7, default='#0078d4')  # Hex color
    tag_description = models.TextField(null=True, blank=True)
    tag_category = models.CharField(max_length=50, choices=TAG_CATEGORY_CHOICES)
    
    # Status and Usage
    is_active = models.BooleanField(default=True)
    usage_count = models.IntegerField(default=0)
    
    # Audit Fields
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
    created_by_user_id = models.UUIDField()
    
    class Meta:
        db_table = 'crm_contact_tags'
        verbose_name = 'Contact Tag'
        verbose_name_plural = 'Contact Tags'
        indexes = [
            models.Index(fields=['company_id', 'tag_category'], name='idx_company_tag_category'),
            models.Index(fields=['tag_name'], name='idx_tag_name'),
        ]
        constraints = [
            models.UniqueConstraint(fields=['company_id', 'tag_name'], name='uk_company_tag_name'),
        ]
```

### **4.2 ContactGroup**

```python
class ContactGroup(models.Model):
    """
    Reference model for contact grouping and segmentation
    """
    
    # Primary Key
    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
    
    # Foreign Keys
    company_id = models.UUIDField()
    created_by_user_id = models.UUIDField()
    
    # Core Fields
    group_name = models.CharField(max_length=100)
    group_description = models.TextField(null=True, blank=True)
    group_type = models.CharField(max_length=50, choices=GROUP_TYPE_CHOICES)
    
    # Group Configuration
    is_dynamic = models.BooleanField(default=False)  # Static vs Dynamic group
    filter_criteria = models.JSONField(null=True, blank=True)  # For dynamic groups
    auto_refresh = models.BooleanField(default=False)
    refresh_frequency = models.CharField(max_length=20, choices=FREQUENCY_CHOICES, default='daily')
    
    # Status and Usage
    is_active = models.BooleanField(default=True)
    contact_count = models.IntegerField(default=0)
    
    # Audit Fields
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
    last_refreshed_at = models.DateTimeField(null=True, blank=True)
    
    class Meta:
        db_table = 'crm_contact_groups'
        verbose_name = 'Contact Group'
        verbose_name_plural = 'Contact Groups'
        indexes = [
            models.Index(fields=['company_id', 'group_type'], name='idx_company_group_type'),
            models.Index(fields=['is_dynamic'], name='idx_dynamic_group'),
        ]
        constraints = [
            models.UniqueConstraint(fields=['company_id', 'group_name'], name='uk_company_group_name'),
        ]
```

### **4.3 CommunicationPreference**

```python
class CommunicationPreference(models.Model):
    """
    Reference model for contact communication preferences
    """
    
    # Primary Key
    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
    
    # Foreign Keys
    company_id = models.UUIDField()
    
    # Core Fields
    preference_name = models.CharField(max_length=50)
    preference_type = models.CharField(max_length=20, choices=PREFERENCE_TYPE_CHOICES)
    preference_description = models.TextField(null=True, blank=True)
    
    # Configuration
    default_value = models.BooleanField(default=True)
    is_required = models.BooleanField(default=False)
    display_order = models.IntegerField(default=0)
    
    # Status
    is_active = models.BooleanField(default=True)
    
    # Audit Fields
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
    
    class Meta:
        db_table = 'crm_communication_preferences'
        verbose_name = 'Communication Preference'
        verbose_name_plural = 'Communication Preferences'
        indexes = [
            models.Index(fields=['company_id', 'preference_type'], name='idx_company_pref_type'),
            models.Index(fields=['display_order'], name='idx_display_order'),
        ]
```

### **4.4 ContactSource**

```python
class ContactSource(models.Model):
    """
    Reference model for contact source tracking
    """
    
    # Primary Key
    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
    
    # Foreign Keys
    company_id = models.UUIDField()
    
    # Core Fields
    source_name = models.CharField(max_length=50)
    source_category = models.CharField(max_length=50, choices=SOURCE_CATEGORY_CHOICES)
    source_description = models.TextField(null=True, blank=True)
    
    # Tracking
    is_active = models.BooleanField(default=True)
    contact_count = models.IntegerField(default=0)
    conversion_rate = models.DecimalField(max_digits=5, decimal_places=2, default=0.00)
    
    # Integration
    integration_endpoint = models.URLField(null=True, blank=True)
    api_key_required = models.BooleanField(default=False)
    
    # Audit Fields
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
    
    class Meta:
        db_table = 'crm_contact_sources'
        verbose_name = 'Contact Source'
        verbose_name_plural = 'Contact Sources'
        indexes = [
            models.Index(fields=['company_id', 'source_category'], name='idx_company_source_category'),
            models.Index(fields=['is_active'], name='idx_active_source'),
        ]
        constraints = [
            models.UniqueConstraint(fields=['company_id', 'source_name'], name='uk_company_source_name'),
        ]
```

--- END OF SECTION 4 ---

## **5. FOREIGN KEY RELATIONSHIPS**

### **5.1 Primary Relationships**

- **Contact** → **Organization**: Many-to-One relationship linking contacts to their associated organizations through `organization_id`. Enables hierarchical contact management and company-based contact grouping.

- **Contact** → **User**: Many-to-One relationship through `created_by_user_id` tracking which user created each contact record for audit trail and ownership management.

- **Organization** → **Organization**: Self-referential relationship through `parent_organization_id` enabling organizational hierarchy and parent-subsidiary company structures.

- **ContactRelationship** → **Contact**: Many-to-One relationship through `contact_id` defining which contact the relationship record applies to.

- **ContactRelationship** → **Organization**: Many-to-One relationship through `organization_id` defining which organization the contact is related to.

- **ContactRelationship** → **Contact**: Many-to-One relationship through `reporting_to_contact_id` defining reporting structures within organizations.

### **5.2 Many-to-Many Relationships**

- **Contact** ↔ **ContactTag**: Many-to-Many relationship through intermediate `ContactTagAssignment` model enabling flexible contact categorization and tagging system.

- **Contact** ↔ **ContactGroup**: Many-to-Many relationship through intermediate `ContactGroupMembership` model enabling contact segmentation and group management.

- **Contact** ↔ **CommunicationPreference**: Many-to-Many relationship through intermediate `ContactCommunicationPreference` model enabling individualized communication preferences per contact.

### **5.3 Relationship Integrity Rules**

- **Cascade Delete**: When an organization is deleted, all associated contacts are set to null for `organization_id` but contact records are preserved.

- **Protect Delete**: User records referenced in `created_by_user_id` are protected from deletion to maintain audit trail integrity.

- **Restrict Delete**: Contact records referenced in `reporting_to_contact_id` are restricted from deletion to prevent broken reporting hierarchies.

- **Set Null**: Parent organization deletions set `parent_organization_id` to null in child organizations, maintaining organizational structure integrity.

--- END OF SECTION 5 ---

## **6. BUSINESS RULES & VALIDATIONS**

### **6.1 Data Integrity Rules**

- **Email Uniqueness**: Primary email must be unique within each company to prevent duplicate contact records.
- **Phone Number Format**: All phone numbers must follow international formatting standards (+CountryCode-Number).
- **Name Requirements**: First name and last name are mandatory fields for all contact records.
- **Organization Validation**: Organization references must point to existing active organizations.
- **Status Consistency**: Contact status must align with relationship status in ContactRelationship records.
- **Lead Score Range**: Lead scores must be between 0 and 100, with automatic validation on save.
- **URL Validation**: All social media profile URLs must be valid and accessible.
- **Address Completeness**: If address_line_1 is provided, city and country must also be provided.

### **6.2 Validation Logic**

```python
def clean_primary_email(self):
    """
    Custom validation for primary email field
    """
    if self.primary_email:
        # Check email format
        email_validator = EmailValidator()
        try:
            email_validator(self.primary_email)
        except ValidationError:
            raise ValidationError("Invalid email format")
        
        # Check for duplicates within company
        if Contact.objects.filter(
            company_id=self.company_id,
            primary_email=self.primary_email
        ).exclude(id=self.id).exists():
            raise ValidationError("Contact with this email already exists in your company")

def clean_phone_number(self, phone_number):
    """
    Validate and format phone numbers
    """
    if phone_number:
        # Remove all non-digit characters
        digits_only = re.sub(r'\D', '', phone_number)
        
        # Validate length based on country code
        if phone_number.startswith('+'):
            if len(digits_only) < 10 or len(digits_only) > 15:
                raise ValidationError("Invalid international phone number format")
        else:
            if len(digits_only) != 10:  # Assuming local format
                raise ValidationError("Phone number must be 10 digits")
    
    return phone_number

def clean_lead_score(self):
    """
    Validate lead score range
    """
    if self.lead_score < 0:
        raise ValidationError("Lead score cannot be negative")
    if self.lead_score > 100:
        raise ValidationError("Lead score cannot exceed 100")

def clean_organization_relationship(self):
    """
    Validate contact-organization relationship consistency
    """
    if self.organization_id:
        org = Organization.objects.filter(
            id=self.organization_id,
            company_id=self.company_id,
            organization_status='active'
        ).first()
        
        if not org:
            raise ValidationError("Selected organization is not active or doesn't exist")

def clean_social_media_urls(self):
    """
    Validate social media profile URLs
    """
    social_fields = [
        ('linkedin_profile', 'linkedin.com'),
        ('twitter_profile', 'twitter.com'),
        ('facebook_profile', 'facebook.com')
    ]
    
    for field, domain in social_fields:
        url = getattr(self, field)
        if url and domain not in url.lower():
            raise ValidationError(f"Invalid {field.replace('_', ' ')} URL")
```

### **6.3 Business Constraints**

- **Single Primary Relationship**: A contact can only have one primary relationship with an organization.
- **Decision Maker Limitation**: Only one contact can be marked as primary decision maker per organization.
- **Organization Hierarchy Depth**: Maximum of 5 levels in organizational hierarchy to prevent infinite loops.
- **Contact Group Limits**: A contact can belong to maximum of 50 static groups and 20 dynamic groups.
- **Tag Usage Limits**: Maximum of 20 tags can be applied to a single contact.
- **Communication Preferences**: If do_not_email is True, email cannot be set as preferred communication.
- **Inactive Contact Restrictions**: Inactive contacts cannot be assigned to new opportunities or campaigns.
- **Data Retention**: Deleted contacts are soft-deleted and retained for 7 years for compliance.

### **6.4 Automated Business Rules**

- **Duplicate Detection**: Automatic duplicate detection based on email, phone, and name similarity scores.
- **Lead Score Updates**: Automatic lead score recalculation based on activity and engagement patterns.
- **Status Transitions**: Automated status updates based on last contacted date and activity levels.
- **Group Refresh**: Dynamic groups automatically refresh based on configured frequency.
- **Address Standardization**: Automatic address formatting and validation using postal service APIs.
- **Email Validation**: Periodic email validation and bounce detection for contact data quality.

--- END OF SECTION 6 ---

## **7. UI/UX SPECIFICATIONS**

### **7.1 User Interface Requirements**

- **Layout:** Responsive grid layout with three-panel design: navigation sidebar (250px), main content area (flexible), and details panel (350px on desktop). Adaptive layout for mobile devices with collapsible panels.
- **Navigation:** Hierarchical navigation with breadcrumb trail, quick search bar in header, advanced filters in left sidebar, and action toolbar with contextual buttons.
- **Responsiveness:** Mobile-first design with breakpoints at 768px (tablet) and 1024px (desktop). Touch-optimized controls for mobile devices with swipe gestures for navigation.

### **7.2 User Experience Design**

- **User Flow:** Login → Dashboard → Contact Directory → Search/Filter → Contact List → Contact Details → Edit/Export. Seamless transitions between list, detail, and edit views with contextual actions.
- **Error Handling:** Inline validation messages with clear error descriptions, confirmation dialogs for destructive actions, and toast notifications for success/failure states.
- **Loading States:** Skeleton screens for contact lists, progress indicators for bulk operations, and optimistic updates for immediate feedback.

### **7.3 Accessibility Standards**

- **WCAG Compliance:** WCAG 2.1 AA level compliance with proper ARIA labels, semantic HTML structure, and keyboard navigation support.
- **Keyboard Navigation:** Full keyboard accessibility with tab order logic, skip links for main content, and focus indicators for all interactive elements.
- **Screen Reader Support:** Comprehensive ARIA labels for form fields, live regions for dynamic content updates, and descriptive alt text for images.

### **7.4 Visual Design System**

- **Color Scheme:** 
  - Primary Colors: Professional blue palette (#0078d4, #106ebe, #005a9e)
  - Success Colors: Green palette (#107c10, #0e6e0e) for positive actions
  - Warning Colors: Amber palette (#ff8c00, #f7630c) for attention states
  - Error Colors: Red palette (#d13438, #a4262c) for error states
  - Neutral Colors: Gray scale (#f8f9fa, #6c757d, #495057) for backgrounds and text

- **Typography:** 
  - Primary Font: Segoe UI, system-ui, -apple-system, sans-serif
  - Font Sizes: 12px-48px with responsive scaling
  - Font Weights: 300 (Light), 400 (Regular), 600 (Semibold), 700 (Bold)
  - Line Heights: 1.2-1.6 for optimal readability

- **Iconography:** Fluent UI icon set with consistent 24px size, SVG format for scalability, and meaningful visual metaphors.

### **7.5 Design Language Standards**

- **Design System:** Microsoft Fluent Design System with modern enhancements for CRM-specific interactions
- **Component Library:** Custom React component library with consistent styling and behavior
- **Design Tokens:** Centralized design token system for colors, spacing, typography, and interactions

### **7.6 Typography Standards**

- **Primary Font Family:** Segoe UI, system-ui, -apple-system, BlinkMacSystemFont, sans-serif
- **Secondary Font Family:** Consolas, Monaco, 'Courier New', monospace (for code and data)
- **Font Sizes:** 
  - **H1:** 32px / 600 / 1.2
  - **H2:** 24px / 600 / 1.3
  - **H3:** 20px / 600 / 1.3
  - **H4:** 18px / 600 / 1.4
  - **H5:** 16px / 600 / 1.4
  - **H6:** 14px / 600 / 1.4
  - **Body Large:** 16px / 400 / 1.5
  - **Body Medium:** 14px / 400 / 1.5
  - **Body Small:** 12px / 400 / 1.4
  - **Caption:** 11px / 400 / 1.4
- **Font Weights:** 300 (Light), 400 (Regular), 600 (Semibold), 700 (Bold)
- **Text Colors:** Primary (#323130), Secondary (#605e5c), Tertiary (#a19f9d), Disabled (#d2d0ce), Error (#d13438), Success (#107c10)

### **7.7 Color Palette**

- **Primary Colors:**
  - **Primary 50:** #f3f2f1 (Lightest)
  - **Primary 100:** #edebe9
  - **Primary 200:** #e1dfdd
  - **Primary 300:** #d2d0ce
  - **Primary 400:** #c8c6c4
  - **Primary 500:** #0078d4 (Main)
  - **Primary 600:** #106ebe
  - **Primary 700:** #005a9e
  - **Primary 800:** #004578
  - **Primary 900:** #003566 (Darkest)
- **Secondary Colors:** #6264a7 (Purple), #8764b8 (Violet), #ca5010 (Orange)
- **Neutral Colors:** #faf9f8, #f3f2f1, #edebe9, #e1dfdd, #d2d0ce, #c8c6c4, #a19f9d, #605e5c, #323130, #201f1e
- **Semantic Colors:**
  - **Success:** #107c10, #0e6e0e, #0c5c0c
  - **Warning:** #ff8c00, #f7630c, #ca5010
  - **Error:** #d13438, #a4262c, #8b0000
  - **Info:** #0078d4, #106ebe, #005a9e

### **7.8 Spacing System**

- **Base Unit:** 4px base spacing unit
- **Spacing Scale:**
  - **XS:** 4px
  - **SM:** 8px
  - **MD:** 16px
  - **LG:** 24px
  - **XL:** 32px
  - **2XL:** 48px
  - **3XL:** 64px

### **7.9 Border & Shadow System**

- **Border Radius:**
  - **None:** 0px
  - **SM:** 2px
  - **MD:** 4px
  - **LG:** 8px
  - **XL:** 12px
  - **Full:** 50%
- **Border Width:** 0px, 1px, 2px standards
- **Box Shadows:**
  - **SM:** 0 1px 3px rgba(0, 0, 0, 0.12)
  - **MD:** 0 4px 6px rgba(0, 0, 0, 0.16)
  - **LG:** 0 10px 20px rgba(0, 0, 0, 0.19)
  - **XL:** 0 14px 28px rgba(0, 0, 0, 0.25)

### **7.10 Component Standards**

- **Buttons:**
  - **Primary Button:** 32px height, 16px padding, 4px border-radius, #0078d4 background
  - **Secondary Button:** 32px height, 16px padding, 4px border-radius, transparent background
  - **Outline Button:** 32px height, 16px padding, 4px border-radius, #0078d4 border
  - **Text Button:** 32px height, 8px padding, transparent background
  - **Icon Button:** 32px x 32px, circular, transparent background
  - **Floating Action Button:** 56px diameter, circular, #0078d4 background

- **Form Controls:**
  - **Text Input:** 32px height, 12px padding, 1px border, #605e5c text
  - **Select Dropdown:** 32px height, 12px padding, 1px border, dropdown arrow
  - **Checkbox:** 16px size, square checkmark, #0078d4 when checked
  - **Radio Button:** 16px size, circular dot, #0078d4 when selected
  - **Toggle Switch:** 40px width, 20px height, circular thumb
  - **Date Picker:** 32px height, calendar popup, date format MM/DD/YYYY
  - **Time Picker:** 32px height, clock interface, 12-hour format

- **Cards:**
  - **Default Card:** 16px padding, 4px shadow, 4px border-radius
  - **Elevated Card:** 16px padding, 8px shadow, 4px border-radius
  - **Outlined Card:** 16px padding, 1px border, 4px border-radius

- **Tables:**
  - **Header Row:** 48px height, #f8f9fa background, 600 weight text
  - **Data Row:** 48px height, 1px bottom border, hover state
  - **Pagination:** 32px height, 8px border-radius, active state styling

### **7.11 Filter System Standards**

- **Filter Layout:** Left sidebar accordion style with collapsible sections
- **Filter Components:**
  - **Search Input:** 100% width, search icon, placeholder text
  - **Date Range Picker:** Dual calendar, preset options (Today, This Week, This Month)
  - **Multi-select Dropdown:** Chip display, max 10 visible items, search capability
  - **Single Select Dropdown:** 100% width, search functionality
  - **Checkbox Group:** Vertical layout, max 8 visible items
  - **Radio Group:** Horizontal layout for 2-4 options, vertical for more
  - **Range Slider:** Min/max values, step increments, value display
  - **Number Input:** Min/max validation, step controls
- **Filter Actions:**
  - **Apply Button:** Primary styling, fixed bottom position
  - **Clear Button:** Secondary styling, right-aligned
  - **Reset Button:** Text styling, left-aligned
  - **Save Filter:** Functionality to save current filter configuration
- **Filter States:**
  - **Active Filters:** Chip display with remove action
  - **Filter Count:** Badge display on filter button
  - **Loading State:** Spinner overlay, disabled state

### **7.12 Data Display Standards**

- **Tables:**
  - **Column Headers:** Left alignment, sorting icons, resize capability
  - **Row Height:** 48px standard, 40px compact, 56px comfortable
  - **Cell Padding:** 12px horizontal, 8px vertical
  - **Alternating Rows:** #f8f9fa background with 0.5 opacity
  - **Hover State:** #f3f2f1 background, 0.2s transition
  - **Selection State:** #e1f5fe background, #0078d4 checkbox

- **Lists:**
  - **List Item Height:** 56px standard
  - **List Item Padding:** 16px horizontal, 8px vertical
  - **Divider Lines:** 1px height, #e1dfdd color, 0.8 opacity
  - **Avatar Size:** 32px small, 40px medium, 48px large

- **Cards/Grid:**
  - **Card Spacing:** 16px gap between cards
  - **Card Aspect Ratio:** 16:9 standard, 4:3 for contact cards
  - **Image Placeholder:** 200px height, #f3f2f1 background, icon center
  - **Text Overflow:** Ellipsis handling, 2-line clamp for descriptions

### **7.13 Interactive Elements**

- **Hover States:** 0.2s color transitions, 0.1s background changes
- **Focus States:** 2px solid outline, #0078d4 color, 2px offset
- **Active States:** 0.1s color changes, 0.05s transform effects
- **Disabled States:** 0.5 opacity, not-allowed cursor, gray colors
- **Loading States:** 16px spinner, skeleton screens, shimmer effects
- **Empty States:** Illustrations, helpful messages, action buttons

### **7.14 Responsive Design Standards**

- **Breakpoints:**
  - **Mobile:** < 768px (single column, stacked layout)
  - **Tablet:** 768px - 1024px (two-column, adapted components)
  - **Desktop:** > 1024px (multi-column, full functionality)
  - **Large Desktop:** > 1440px (optimized layout, enhanced spacing)
- **Container Max Widths:** 100% mobile, 728px tablet, 984px desktop, 1200px large desktop
- **Grid Systems:** 12-column grid, 16px gutters, responsive breakpoints
- **Typography Scaling:** Font sizes scale 0.875x on mobile, 1x on tablet, 1.125x on desktop
- **Component Adaptations:** Collapsible navigation, touch-optimized controls, simplified layouts

### **7.15 Animation & Transitions**

- **Transition Duration:** 0.15s fast, 0.2s medium, 0.3s slow
- **Easing Functions:** ease-out for entrances, ease-in-out for state changes, ease-in for exits
- **Micro-interactions:** Button hover 0.2s, form field focus 0.15s, card hover 0.3s
- **Page Transitions:** 0.3s fade, 0.4s slide, 0.2s scale effects
- **Loading Animations:** 1s rotation spinner, 1.5s skeleton screen, 2s shimmer effect

--- END OF SECTION 7 ---

## **8. INTEGRATION POINTS**

### **8.1 External Systems**

- **Email Marketing Platforms:** Mailchimp, Constant Contact, SendGrid integration for campaign synchronization and contact list management
- **Social Media APIs:** LinkedIn Sales Navigator, Twitter API for profile enrichment and social data integration
- **Data Enrichment Services:** Clearbit, ZoomInfo, FullContact for automatic contact data enhancement and validation
- **Email Validation Services:** Hunter.io, NeverBounce for real-time email verification and bounce detection
- **Address Validation APIs:** Google Maps API, SmartyStreets for address standardization and validation
- **Calendar Systems:** Google Calendar, Outlook Calendar integration for meeting scheduling and contact activity tracking

### **8.2 Internal APIs**

- **Lead Capture Module:** API endpoints for lead-to-contact conversion and scoring data synchronization
- **Opportunity Pipeline:** Contact opportunity relationship management and deal tracking integration
- **Activity Timeline:** Contact activity logging and interaction history synchronization
- **User Management:** User permission and access control integration for contact data security
- **Notification System:** Real-time notifications for contact updates, assignments, and important events
- **Audit Trail:** Comprehensive audit logging for all contact data changes and access patterns

--- END OF SECTION 8 ---

## **9. API SPECIFICATIONS**

### **9.1 REST Endpoints**

#### **GET /api/contacts/**
- **Purpose:** Retrieve paginated list of contacts with filtering and search capabilities
- **Authentication:** JWT token required with company_id validation
- **Parameters:** page, page_size, search, contact_type, status, organization_id, tags
- **Response:** Paginated contact list with total count and filtering metadata

#### **POST /api/contacts/**
- **Purpose:** Create new contact record with validation and duplicate detection
- **Authentication:** JWT token with create_contact permission
- **Request Body:** Contact data with required fields validation
- **Response:** Created contact object with ID and validation warnings

#### **GET /api/contacts/{id}/**
- **Purpose:** Retrieve detailed contact information including relationships and activities
- **Authentication:** JWT token with read_contact permission
- **Parameters:** contact_id (UUID)
- **Response:** Complete contact object with related data

#### **PUT /api/contacts/{id}/**
- **Purpose:** Update existing contact information with change tracking
- **Authentication:** JWT token with update_contact permission
- **Request Body:** Updated contact fields with validation
- **Response:** Updated contact object with change summary

#### **DELETE /api/contacts/{id}/**
- **Purpose:** Soft delete contact with data retention policies
- **Authentication:** JWT token with delete_contact permission
- **Parameters:** contact_id (UUID)
- **Response:** Deletion confirmation with retention information

#### **GET /api/organizations/**
- **Purpose:** Retrieve organizations with hierarchical structure support
- **Authentication:** JWT token with read_organization permission
- **Parameters:** parent_id, industry, organization_type, include_children
- **Response:** Organization list with hierarchy metadata

#### **POST /api/contacts/bulk-import/**
- **Purpose:** Bulk contact import with validation and duplicate handling
- **Authentication:** JWT token with bulk_import permission
- **Request Body:** CSV file with contact data and import options
- **Response:** Import results with success count, errors, and duplicates

### **9.2 Data Formats**

- **Request Format:** JSON for all endpoints except file uploads (multipart/form-data)
- **Response Format:** JSON with consistent error structure and pagination metadata
- **Error Format:** Standardized error response with error_code, message, and details fields
- **Date Format:** ISO 8601 (YYYY-MM-DDTHH:mm:ssZ) for all datetime fields
- **File Format:** CSV for bulk imports with UTF-8 encoding and standardized headers

--- END OF SECTION 9 ---

## **10. SECURITY REQUIREMENTS**

### **10.1 Authentication**

- **Method:** JWT-based authentication with refresh token rotation and short access token lifetime (15 minutes)
- **Authorization:** Role-based access control (RBAC) with granular permissions for contact operations
- **Session Management:** Secure session handling with automatic timeout and concurrent session limits
- **Multi-Factor Authentication:** Optional MFA for sensitive operations like bulk exports and data deletions

### **10.2 Data Protection**

- **Encryption:** AES-256 encryption for sensitive contact data at rest, TLS 1.3 for data in transit
- **Masking:** Automatic PII masking for phone numbers and addresses in logs and debug outputs
- **Backup:** Encrypted daily backups with 30-day retention and point-in-time recovery capability
- **Data Anonymization:** Automatic data anonymization for deleted contacts after 7-year retention period

### **10.3 Access Control**

- **Permissions:** Granular permission matrix (create_contact, read_contact, update_contact, delete_contact, bulk_import, export_data)
- **Roles:** System Administrator, Sales Manager, Sales Representative, Marketing User, Read-Only User with predefined permission sets
- **Audit Trail:** Comprehensive audit logging for all contact data access, modifications, and exports with user attribution
- **Data Segmentation:** Company-based data isolation with optional department-level access controls

--- END OF SECTION 10 ---

## **11. PERFORMANCE CONSIDERATIONS**

### **11.1 Database Optimization**

- **Indexing Strategy:** Composite indexes on frequently queried fields (company_id + status, organization_id + contact_type, email + company_id)
- **Query Optimization:** Optimized queries with select_related and prefetch_related for reducing database hits
- **Connection Pooling:** Database connection pool with 20-50 connections depending on load and automatic failover
- **Partitioning:** Table partitioning by company_id for large deployments with multi-tenant isolation

### **11.2 Caching Strategy**

- **Cache Layers:** Redis for session data and frequently accessed contacts, application-level caching for reference data
- **Cache Invalidation:** Intelligent cache invalidation on data updates with TTL-based expiration for static data
- **Performance Metrics:** Query performance monitoring with slow query logging and automatic optimization suggestions
- **CDN Integration:** Static asset caching through CDN for improved UI performance globally

--- END OF SECTION 11 ---

## **12. TESTING REQUIREMENTS**

### **12.1 Unit Tests**

- **Coverage Target:** Minimum 90% code coverage for all models, views, and business logic
- **Test Framework:** pytest with Django test extensions and factory boy for test data generation
- **Test Data:** Comprehensive test data sets covering edge cases, boundary conditions, and error scenarios
- **Mock Services:** Mocked external API integrations for reliable testing without external dependencies

### **12.2 Integration Tests**

- **API Testing:** Comprehensive API endpoint testing with authentication, authorization, and data validation
- **Database Testing:** Database integration testing with transaction rollback and data integrity verification
- **Third-party Testing:** Integration testing with actual external services in staging environment
- **Performance Testing:** Load testing with simulated user traffic and stress testing for peak usage scenarios

### **12.3 User Acceptance Tests**

- **UAT Scenarios:** Real-world usage scenarios covering complete user workflows from contact creation to export
- **User Stories:** Comprehensive user story mapping with acceptance criteria for each user role
- **Acceptance Criteria:** Definition of done including functional requirements, performance benchmarks, and accessibility standards
- **Cross-browser Testing:** Testing across Chrome, Firefox, Safari, and Edge with responsive design validation

--- END OF SECTION 12 ---

## **13. DEPLOYMENT SPECIFICATIONS**

### **13.1 Environment Requirements**

- **Development:** Docker-based development environment with hot reload and debugging tools
- **Staging:** Production-like staging environment with full feature parity and performance testing
- **Production:** High-availability deployment with load balancers, auto-scaling, and disaster recovery
- **Database:** PostgreSQL 14+ with read replicas for reporting and backup clustering

### **13.2 Configuration Management**

- **Settings:** Environment-specific configuration files with encrypted sensitive data
- **Environment Variables:** Secure environment variable management for secrets and API keys
- **Secrets Management:** HashiCorp Vault or AWS Secrets Manager for secure credential storage
- **Feature Flags:** Feature flag system for gradual rollouts and A/B testing capabilities

### **13.3 Monitoring & Logging**

- **Application Logs:** Structured JSON logging with ELK stack integration and log aggregation
- **Performance Metrics:** Application performance monitoring with APM tools and custom metrics
- **Error Tracking:** Real-time error tracking and alerting with Sentry or similar service
- **Health Checks:** Comprehensive health check endpoints for database, cache, and external service dependencies

--- END OF SECTION 13 ---

## **14. MAINTENANCE & SUPPORT**

### **14.1 Regular Maintenance**

- **Database Maintenance:** Weekly database optimization, monthly index rebuilding, and quarterly performance tuning
- **Performance Tuning:** Continuous performance monitoring with automated optimization recommendations
- **Security Updates:** Monthly security patching with vulnerability scanning and penetration testing
- **Data Cleanup:** Quarterly data cleanup for soft-deleted records and temporary files

### **14.2 Support Procedures**

- **Issue Tracking:** Jira integration for bug tracking and feature requests with SLA-based response times
- **Knowledge Base:** Comprehensive documentation with troubleshooting guides and best practices
- **User Training:** Regular training sessions and video tutorials for new features and workflows
- **Escalation Process:** Defined escalation matrix with clear response time guarantees and communication protocols

--- END OF SECTION 14 ---

## **15. VERSION CONTROL**

### **15.1 Version History**

- **v1.0.0:** Initial release with core contact management, organization hierarchy, and basic search functionality
- **v1.1.0:** Enhanced duplicate detection, advanced filtering, and bulk import capabilities
- **v1.2.0:** Mobile-responsive design, offline support, and performance optimizations
- **v1.3.0:** Advanced analytics, custom fields, and integration marketplace

### **15.2 Change Management**

- **Release Process:** Bi-weekly release cycle with feature freeze, testing, and staged deployment
- **Rollback Procedures:** Automated rollback capabilities with zero-downtime deployment and blue-green deployment
- **Migration Scripts:** Database migration scripts with backward compatibility and data validation
- **Release Notes:** Comprehensive release notes with breaking changes, new features, and upgrade instructions

--- END OF SECTION 15 ---

## **16. COMPLIANCE & AUDIT**

### **16.1 Regulatory Compliance**

- **GDPR:** Full GDPR compliance with right to access, right to rectification, right to erasure, and data portability
- **CCPA:** California Consumer Privacy Act compliance with opt-out mechanisms and disclosure requirements
- **SOX:** Sarbanes-Oxley compliance for financial data handling and audit trail requirements
- **HIPAA:** Healthcare compliance for protected health information with enhanced security measures

### **16.2 Audit Requirements**

- **Audit Trail:** Immutable audit trail for all contact data changes with user attribution and timestamp
- **Compliance Reporting:** Automated compliance reporting for data access, modifications, and exports
- **Documentation:** Comprehensive audit documentation including data flow diagrams and process documentation
- **Third-party Audits:** Annual security audits and penetration testing with remediation tracking

--- END OF SECTION 16 ---
