# 5.3.5 Intercompany Transfers
Template Ref: _txn_02 (Medium Transaction)

## 5.3.5.1 Business Purpose

The **Intercompany Transfer** module handles stock movements between different legal entities (Companies) within the same group. This is treated as a "Purchase/Sale" relationship in the background but handled via a single simplified workflow in the Inventory module.

**Goals**:
-   **Legal Compliance**: Ensure stock leaves Company A's book and enters Company B's book.
-   **Tax Accuracy**: (Phase 2) Support intercompany pricing and invoicing.
-   **Logistics**: Manage cross-company shipments with clear ownership transfer.

---

## 5.3.5.2 Data Model

### A) Intercompany Header (`intercompany_transfer`)

| Field | Type | Required | Description |
| :--- | :--- | :--- | :--- |
| `id` | UUID | Yes | Primary Key |
| `transfer_number` | String(30) | Yes | Global unique ID |
| `from_company_id` | FK (Company) | Yes | Seller/Sender |
| `to_company_id` | FK (Company) | Yes | Buyer/Receiver |
| `from_location_id` | FK (Location) | Yes | Source warehouse |
| `to_location_id` | FK (Location) | Yes | Destination warehouse |
| `status` | Enum | Yes | `DRAFT`, `SHIPPED`, `RECEIVED` |
| `transfer_date` | Date | Yes | |

### B) Intercompany Line (`intercompany_transfer_line`)

| Field | Type | Required | Description |
| :--- | :--- | :--- | :--- |
| `id` | UUID | Yes | Primary Key |
| `transfer_id` | FK (Header) | Yes | |
| `item_variant_id` | FK (ItemVariant) | Yes | |
| `qty` | Decimal | Yes | Quantity |
| `intercompany_price` | Decimal | No | Transfer price for accounting |

---

## 5.3.4.3 UI / UX Requirements
Similar to Internal Transfer, but allows selection of **Company** in the From/To fields.

---

## 5.3.4.4 Module Metadata & Build Steps

```yaml
module_type: transaction
complexity: medium
template_ref: _txn_02

depends_on:
  - Company Master
  - Inventory (Core)
  - Location Master

notes: >
  This module creates dual StockMovements: One for Source Company (OUT) 
  and one for Destination Company (IN).
```
